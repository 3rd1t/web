{
  "version": 4,
  "terraform_version": "0.14.2",
  "serial": 46,
  "lineage": "144b1429-2c45-e9c3-7661-058e1ad22b06",
  "outputs": {},
  "resources": [
    {
      "mode": "managed",
      "type": "nomad_job",
      "name": "app",
      "provider": "provider[\"registry.terraform.io/hashicorp/nomad\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allocation_ids": [
              "e68e540f-caa9-99f0-dcd2-32e3af478e34",
              "fb0dfaa0-0ded-74ba-367c-b18b81878d21",
              "007b2a7a-15bd-0b8b-4f92-3d8c4614f95d",
              "d11d7990-0637-ef14-33e8-7b5046e769c8"
            ],
            "datacenters": [
              "dc1"
            ],
            "deployment_id": null,
            "deployment_status": null,
            "deregister_on_destroy": true,
            "deregister_on_id_change": true,
            "detach": true,
            "id": "app",
            "jobspec": "job \"app\" {\n  datacenters = [\"dc1\"]\n  type        = \"service\"\n\n  update {\n    max_parallel      = 1\n    min_healthy_time  = \"10s\"\n    healthy_deadline  = \"3m\"\n    progress_deadline = \"10m\"\n    auto_revert       = true\n    canary            = 0\n  }\n\n  group \"app\" {\n    count = 1\n\n    network {\n      port \"http\" {\n        to = 3000\n      }\n    }\n\n    restart {\n      attempts = 2\n      interval = \"30m\"\n      delay    = \"15s\"\n      mode     = \"fail\"\n    }\n\n    task \"app\" {\n      driver = \"docker\"\n\n      template {\n        data      = \"{{ file \\\"/home/andreas/github/perfolio/web/.env\\\" }}\"\n        destination = \"secrets/.env\"\n        env         = true\n        change_mode = \"restart\"\n      }\n\n      config {\n        image = \"perfolio/web-app:prod\"\n        ports = [\"http\"]\n      }\n\n      service {\n        name = \"app\"\n\n        tags = [\n          \"public\",\n          \"web\",\n          \"traefik.enable=true\",\n          \"traefik.http.routers.app.rule=Host(`app.perfol.io`)\",\n        ]\n      }\n    }\n  }\n}\n",
            "json": null,
            "modify_index": "461",
            "name": "app",
            "namespace": "default",
            "policy_override": null,
            "purge_on_destroy": null,
            "region": "global",
            "task_groups": [
              {
                "count": 1,
                "meta": {},
                "name": "app",
                "task": [
                  {
                    "driver": "docker",
                    "meta": {},
                    "name": "app",
                    "volume_mounts": []
                  }
                ],
                "volumes": []
              }
            ],
            "type": "service"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "nomad_job",
      "name": "website",
      "provider": "provider[\"registry.terraform.io/hashicorp/nomad\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allocation_ids": [
              "b31060df-8a9b-59d4-bf23-ea5faa902676"
            ],
            "datacenters": [
              "dc1"
            ],
            "deployment_id": null,
            "deployment_status": null,
            "deregister_on_destroy": true,
            "deregister_on_id_change": true,
            "detach": true,
            "id": "website",
            "jobspec": "job \"website\" {\n  datacenters = [\"dc1\"]\n  type        = \"service\"\n\n  update {\n    max_parallel      = 1\n    min_healthy_time  = \"10s\"\n    healthy_deadline  = \"3m\"\n    progress_deadline = \"10m\"\n    auto_revert       = true\n    canary            = 0\n  }\n\n  group \"website\" {\n    count = 1\n\n    network {\n      port \"http\" {\n        to = 3000\n      }\n    }\n\n    restart {\n      attempts = 2\n      interval = \"30m\"\n      delay    = \"15s\"\n      mode     = \"fail\"\n    }\n\n    task \"website\" {\n      driver = \"docker\"\n\n      config {\n        image = \"perfolio/web-website:prod\"\n        ports = [\"http\"]\n      }\n\n      service {\n        name = \"website\"\n\n        tags = [\n          \"public\",\n          \"web\",\n          \"traefik.enable=true\",\n          \"traefik.http.routers.website.rule=Host(`perfol.io`)\",\n        ]\n      }\n    }\n  }\n}\n",
            "json": null,
            "modify_index": "412",
            "name": "website",
            "namespace": "default",
            "policy_override": null,
            "purge_on_destroy": null,
            "region": "global",
            "task_groups": [
              {
                "count": 1,
                "meta": {},
                "name": "website",
                "task": [
                  {
                    "driver": "docker",
                    "meta": {},
                    "name": "website",
                    "volume_mounts": []
                  }
                ],
                "volumes": []
              }
            ],
            "type": "service"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    }
  ]
}
