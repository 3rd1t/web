import React, { useState } from "react"
import { Snippet } from "../snippet/snippet"
import { motion } from "framer-motion"
/* eslint-disable-next-line */
export interface CodeExamplesProps {
  code: {
    language: string
    snippet: string
  }[]
}

const Logo = (language: string): React.ReactNode => {
  switch (language) {
    case "curl":
      return (
        <svg
          className="w-12 h-6 fill-current"
          xmlns="http://www.w3.org/2000/svg"
          id="svg4155"
          version="1.1"
          viewBox="0 0 256 128"
        >
          <defs id="defs4157">
            <g id="g4159">
              <symbol id="glyph0-0" overflow="visible">
                <path
                  id="path4162"
                  d="m 73.359375,0 0,-84.171875 -60.125,0 0,84.171875 z m -9.625,-78.15625 L 43.296875,-47.5 22.84375,-78.15625 Z M 67.34375,-11.421875 46.890625,-42.09375 67.34375,-72.75 Z m -44.5,5.40625 20.453125,-30.65625 20.4375,30.65625 z M 19.234375,-72.75 39.6875,-42.09375 19.234375,-11.421875 Z m 0,0"
                />
              </symbol>
              <symbol id="glyph0-1" overflow="visible">
                <path
                  id="path4165"
                  d="m 15.03125,-26.8125 c 0,7.09375 1.328125,10.578125 6.859375,15.140625 l 8.53125,7.109375 C 35.828125,-0.125 38.59375,0 45.328125,0 l 18.28125,0 c 3.84375,0 7.9375,-0.84375 7.9375,-5.765625 0,-5.0625 -4.5625,-5.78125 -7.9375,-5.78125 l -20.3125,0 c -2.296875,0 -4.578125,-1.203125 -6.625,-2.890625 l -6.96875,-5.890625 c -1.8125,-1.4375 -3.125,-2.640625 -3.125,-4.921875 l 0,-14.3125 c 0,-2.28125 1.3125,-3.484375 3.125,-4.9375 l 6.96875,-5.890625 c 2.046875,-1.671875 4.328125,-2.875 6.625,-2.875 l 20.3125,0 c 3.375,0 7.9375,-0.734375 7.9375,-5.78125 0,-4.921875 -4.09375,-5.765625 -7.9375,-5.765625 l -18.28125,0 c -6.734375,0 -9.5,0.125 -14.90625,4.5625 l -8.53125,7.09375 C 16.359375,-48.578125 15.03125,-45.09375 15.03125,-38 Z m 0,0"
                />
              </symbol>
              <symbol id="glyph0-2" overflow="visible">
                <path
                  id="path4168"
                  d="m 71.546875,-56.875 c 0,-3.96875 -0.84375,-7.9375 -5.765625,-7.9375 -4.9375,0 -5.78125,3.96875 -5.78125,7.9375 L 60,-23.328125 43.046875,-12.625 c -1.078125,0.71875 -2.28125,1.078125 -3.609375,1.078125 l -3.84375,0 c -2.765625,0 -5.765625,-0.71875 -6.734375,-2.40625 -0.96875,-1.671875 -1.078125,-4.8125 -1.203125,-7.453125 L 26.453125,-56.875 c -0.125,-3.734375 -0.71875,-7.9375 -5.65625,-7.9375 -5.28125,0 -5.890625,4.453125 -5.765625,8.65625 l 1.203125,36.3125 c 0.234375,6.25 0.125,11.1875 5.296875,15.640625 C 25.375,-0.96875 28.984375,0 32.234375,0 l 8.53125,0 c 3.125,0 6.25,-1.4375 9.984375,-3.84375 l 9.375,-6.140625 0,1.921875 c 0,3.96875 0.84375,8.0625 5.765625,8.0625 6.140625,0 5.65625,-5.890625 5.65625,-8.53125 z m 0,0"
                />
              </symbol>
              <symbol id="glyph0-3" overflow="visible">
                <path
                  id="path4171"
                  d="m 15.03125,-7.9375 c 0,3.96875 0.84375,7.9375 5.765625,7.9375 4.9375,0 5.78125,-3.96875 5.78125,-7.9375 l 0,-29.21875 L 42.6875,-50.5 c 2.046875,-1.6875 3.609375,-2.765625 5.765625,-2.765625 l 3.375,0 c 2.765625,0 5.53125,0 6.96875,2.046875 C 60,-49.546875 60,-48.09375 60,-46.171875 c 0,3.71875 1.6875,7.09375 5.890625,7.09375 4.9375,0 5.65625,-4.09375 5.65625,-8.0625 0,-5.28125 -1.328125,-9.25 -5.171875,-13.109375 -3.125,-3.125 -6.84375,-4.5625 -11.296875,-4.5625 l -9.265625,0 c -3.609375,0 -6.96875,2.28125 -10.21875,4.921875 l -9.015625,7.46875 0,-4.703125 c 0,-3.84375 -1.203125,-7.6875 -5.78125,-7.6875 -5.28125,0 -5.765625,4.328125 -5.765625,8.53125 z m 0,0"
                />
              </symbol>
              <symbol id="glyph0-4" overflow="visible">
                <path
                  id="path4174"
                  d="m 49.296875,-80.5625 c 0,-6.859375 -1.921875,-8.0625 -8.53125,-8.0625 l -12.140625,0 c -3.859375,0 -7.9375,0.84375 -7.9375,5.765625 0,5.0625 4.5625,5.78125 7.9375,5.78125 l 9.140625,0 0,65.53125 -9.140625,0 c -3.859375,0 -7.9375,0.84375 -7.9375,5.78125 C 20.6875,-0.71875 25.25,0 28.625,0 l 29.328125,0 c 3.375,0 7.9375,-0.71875 7.9375,-5.765625 0,-4.9375 -4.078125,-5.78125 -7.9375,-5.78125 l -8.65625,0 z m 0,0"
                />
              </symbol>
            </g>
          </defs>
          <use
            xmlns="http://www.w3.org/1999/xlink"
            transform="translate(-86.210953,-184.05469)"
            height="100%"
            width="100%"
            id="use4187"
            y="286.97659"
            x="71.179703"
            href="#glyph0-1"
          />
          <use
            xmlns="http://www.w3.org/1999/xlink"
            transform="translate(-86.210953,-184.05469)"
            height="100%"
            width="100%"
            id="use4189"
            y="286.97659"
            x="133.71095"
            href="#glyph0-2"
          />
          <use
            xmlns="http://www.w3.org/1999/xlink"
            transform="translate(-86.210953,-184.05469)"
            height="100%"
            width="100%"
            id="use4193"
            y="286.97659"
            x="196.2422"
            href="#glyph0-3"
          />
          <use
            xmlns="http://www.w3.org/1999/xlink"
            transform="translate(-86.210953,-184.05469)"
            height="100%"
            width="100%"
            id="use4195"
            y="286.97659"
            x="239.65331"
            href="#glyph0-4"
          />
        </svg>
      )

    case "python":
      return (
        <svg className="w-6 h-6 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128">
          <path
            fill="fill-current"
            d="M49.33 62h29.159C86.606 62 93 55.132 93 46.981V19.183c0-7.912-6.632-13.856-14.555-15.176-5.014-.835-10.195-1.215-15.187-1.191-4.99.023-9.612.448-13.805 1.191C37.098 6.188 35 10.758 35 19.183V30h29v4H23.776c-8.484 0-15.914 5.108-18.237 14.811-2.681 11.12-2.8 17.919 0 29.53C7.614 86.983 12.569 93 21.054 93H31V79.952C31 70.315 39.428 62 49.33 62zm-1.838-39.11c-3.026 0-5.478-2.479-5.478-5.545 0-3.079 2.451-5.581 5.478-5.581 3.015 0 5.479 2.502 5.479 5.581-.001 3.066-2.465 5.545-5.479 5.545zm74.789 25.921C120.183 40.363 116.178 34 107.682 34H97v12.981C97 57.031 88.206 65 78.489 65H49.33C41.342 65 35 72.326 35 80.326v27.8c0 7.91 6.745 12.564 14.462 14.834 9.242 2.717 17.994 3.208 29.051 0C85.862 120.831 93 116.549 93 108.126V97H64v-4h43.682c8.484 0 11.647-5.776 14.599-14.66 3.047-9.145 2.916-17.799 0-29.529zm-41.955 55.606c3.027 0 5.479 2.479 5.479 5.547 0 3.076-2.451 5.579-5.479 5.579-3.015 0-5.478-2.502-5.478-5.579 0-3.068 2.463-5.547 5.478-5.547z"
          />
        </svg>
      )

    case "r":
      return (
        <svg
          className="w-6 h-6 fill-current"
          xmlns="http://www.w3.org/2000/svg"
          preserveAspectRatio="xMidYMid"
          viewBox="0 0 724 561"
        >
          <path
            fill="fill-current"
            fillRule="evenodd"
            d="M361.453 485.937C162.329 485.937.906 377.828.906 244.469.906 111.109 162.329 3 361.453 3 560.578 3 722 111.109 722 244.469c0 133.359-161.422 241.468-360.547 241.468zm55.188-388.531c-151.352 0-274.047 73.908-274.047 165.078s122.695 165.078 274.047 165.078c151.351 0 263.046-50.529 263.046-165.078 0-114.513-111.695-165.078-263.046-165.078z"
          />
          <path
            fill="fill-current"
            fillRule="evenodd"
            d="M550 377s21.822 6.585 34.5 13c4.399 2.226 12.01 6.668 17.5 12.5 5.378 5.712 8 11.5 8 11.5l86 145-139 .062L492 437s-13.31-22.869-21.5-29.5c-6.832-5.531-9.745-7.5-16.5-7.5h-33.026L421 558.974l-123 .052V152.938h247S657.5 154.967 657.5 262 550 377 550 377zm-53.5-135.976l-74.463-.048-.037 69.05 74.5-.024s34.5-.107 34.5-35.125c0-35.722-34.5-33.853-34.5-33.853z"
          />
        </svg>
      )

    default:
      return null
  }
}

export const CodeExamples = ({ code }: CodeExamplesProps) => {
  const [active, setActive] = useState(0)

  const getSnippet = (active: number): React.ReactNode => {
    return (
      <motion.div layout initial={{ opacity: 0 }} animate={{ opacity: 1 }} className="p-4 bg-gray-900 ">
        <Snippet language={code[active].language}>{code[active].snippet}</Snippet>
      </motion.div>
    )
  }

  return (
    <motion.div layout className="flex-grow">
      <motion.nav layout className="flex bg-gray-800">
        {code.map((c, i) => (
          <button
            aria-label={c.language}
            data-testid="selectLanguage"
            key={i}
            className={`p-4 text-xs font-semibold tracking-wide no-underline uppercase focus:outline-none  hover:text-gray-400 ${
              i === active ? "text-gray-200" : "text-gray-600"
            }`}
            onClick={() => setActive(i)}
          >
            {Logo(c.language)}
          </button>
        ))}
      </motion.nav>
      {getSnippet(active)}
    </motion.div>
  )
}

export default CodeExamples
